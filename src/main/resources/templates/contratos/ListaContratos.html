<!DOCTYPE html>
<html lang="es"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="~{fragments/layout :: head('Contratos')}"></head>

<body>
<div class="app-shell">
    <div th:replace="~{fragments/sidebar :: sidebar}"></div>

    <main class="main">
        <div th:replace="~{fragments/header :: topbar}"></div>

        <section class="container">
            <h1>Contratos</h1>
            <p>Gestión de contratos</p>

            <div class="card" style="margin-bottom:16px;">
                <a class="btn btn-primary" th:href="@{/contratos/new}">+ Crear Contrato</a>
            </div>

            <div class="card">
                <table>
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Fecha</th>
                        <th>Con arma</th>
                        <th>Sucursal</th>
                        <th>Vigilante</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="c : ${items}">
                        <td th:text="${c.id}">1</td>
                        <td th:text="${c.fechaContrato}">2026-01-01</td>
                        <td th:text="${c.conArma ? 'Sí' : 'No'}">No</td>
                        <td th:text="${sucursalLabelMap != null ? sucursalLabelMap[c.sucursalId] : c.sucursalId}">Sucursal</td>
                        <td th:text="${vigilanteLabelMap != null ? vigilanteLabelMap[c.vigilanteId] : c.vigilanteId}">Vigilante</td>
                        <td style="display:flex; gap:8px; flex-wrap:wrap;">
                            <a class="btn" th:href="@{/contratos/{id}(id=${c.id})}">Ver / Editar</a>
                            <a class="btn btn-danger" th:href="@{/contratos/{id}/confirm-delete(id=${c.id})}">Borrar</a>
                        </td>
                    </tr>

                    <tr th:if="${items == null || #lists.isEmpty(items)}">
                        <td colspan="6" style="color: var(--muted);">No hay contratos cargados.</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>
</div>
</body>
</html>